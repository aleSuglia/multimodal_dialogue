{% extends "main.html" %}

{% block includes %}
<script src="{{ url_for('static', filename='js/mistakes.js') }}"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.5/socket.io.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vex-js/2.3.4/js/vex.combined.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vex-js/2.3.4/css/vex.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vex-js/2.3.4/css/vex-theme-default.css" />
{% endblock %}

{% block body %}

<div class="container" style="margin-top: 15px">
  <table class="table table-striped">
  	<thead>
    <tr>
	  <th>Questions</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  	{% for mistake in mistakes%}
    {% set m = 0 %}
    <tr>
        <td>{{mistake.question}}</td>
        <td><input type="text" class="fix" value=""></td>
        <td><a class="btn btn-success show_dialogue" value="{{ m }}" id="dialogue_{{ m }}" role="button">Display dialogues &raquo;</a></td>
        <input type="hidden" class="question_id" value="{{ mistake.question_id }}">
        <input type="hidden" class="dialogue_id" value="{{ mistake.dialogue_id }}">
	    </tr >
            <td>
			<div id="log_{{ m }}" style="display: none">
                <img src="{{ mistake.img }}">
                <table class="table table-striped">
                     <thead>
                        <tr>
                          <th>Question</th>
                          <th>Answer</th>
                        </tr>
                      </thead>
                       <tbody id="exchange_table">
                       {% set i = 0 %}
                       {% for entry in mistake.qas %}
                           <tr>
                           {% if i == mistake.question_index  %}
                             <td class="well well-sm"> <span style="color: #F44336">{{ entry.question}}</span> </td>
                             <td class="well well-sm"> <span style="color: #F44336">{{ entry.answer}}</span> </td>
                           {% else %}
                              <td class="well well-sm">{{ entry.question}}</td>
                              <td class="well well-sm">{{ entry.answer}}</td>
                           {% endif %}
                           <tr/>
                           {% set i = i +1 %}
                        {% endfor %}
                      </tbody>
                </table>
            </div>
            </td>
        {% set m = m +1 %}
	{% endfor %}
  </tbody>
  </table>
</div>
{% endblock %}

